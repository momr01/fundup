CREATE PROCEDURE [dbo].[GetPlanesFinalizados]
@idUsuario int,
@idPlan int = null
AS
BEGIN
SET NOCOUNT ON;
SELECT p.ID_PLAN AS ID, p.NOMBRE_PLAN AS NOMBRE, p.DESCRIPCION_PLAN AS DESCRIPCION, p.FECHA_INICIO_PLAN AS 'FECHA INICIO', 
p.FECHA_FIN_PLAN AS 'FECHA FIN', p.CAPITAL_OBJETIVO_PLAN AS CAPITAL,  p.ESTA_COMPLETO_PLAN AS ESTADO
FROM [dbo].[PLAN] p
WHERE p.ID_PLAN = @idPlan or @idPlan is null
AND p.ID_USUARIO = @idUsuario
AND p.ESTA_ACTIVO_PLAN = 1
AND p.ESTA_COMPLETO_PLAN = 1
ORDER BY p.FECHA_INICIO_PLAN DESC
END

