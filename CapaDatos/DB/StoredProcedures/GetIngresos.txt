CREATE PROCEDURE [dbo].[GetIngresos]
@idUsuario int,
@idDinero int = null
AS
BEGIN
SET NOCOUNT ON;
SELECT i.ID_INGRESO AS ID, i.FECHA_INGRESO AS FECHA, i.IMPORTE_INGRESO AS IMPORTE, i.DESCRIPCION_INGRESO AS DESCRIPCION, c.NOMBRE_CATEGORIA AS CATEGORIA, i.ID_CATEGORIA AS ID_CATEGORIA
FROM INGRESO i
INNER JOIN CATEGORIA c ON i.ID_CATEGORIA = c.ID_CATEGORIA
WHERE i.ID_INGRESO = @idDinero or @idDinero is null
AND i.ID_USUARIO = @idUsuario
AND i.ESTA_ACTIVO_INGRESO = 1
AND i.ES_PLAN = 0
ORDER BY i.FECHA_INGRESO DESC
END