CREATE PROCEDURE [dbo].[GetGastos]
@idUsuario int,
@idDinero int = null
AS
BEGIN
SET NOCOUNT ON;
SELECT g.ID_GASTO AS ID, g.FECHA_GASTO AS FECHA, g.IMPORTE_GASTO AS IMPORTE, g.DESCRIPCION_GASTO AS DESCRIPCION, c.NOMBRE_CATEGORIA AS CATEGORIA, g.ID_CATEGORIA AS ID_CATEGORIA
FROM GASTO g
INNER JOIN CATEGORIA c ON g.ID_CATEGORIA = c.ID_CATEGORIA
WHERE g.ID_GASTO = @idDinero or @idDinero is null
AND g.ID_USUARIO = @idUsuario
AND g.ESTA_ACTIVO_GASTO = 1
AND g.ES_PLAN = 0
ORDER BY g.FECHA_GASTO DESC
END