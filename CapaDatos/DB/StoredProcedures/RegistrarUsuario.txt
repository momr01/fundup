CREATE PROCEDURE [dbo].[RegistrarUsuario]
@NOMBRE_USUARIO varchar(100),
@APELLIDO_USUARIO varchar(100),
@FNACIMIENTO_PERSONA datetime,
@DNI_USUARIO varchar(10),
@EMAIL_USUARIO varchar(100),
@CONTRASEÑA_USUARIO varchar(20),
@CALLE_DOMICILIO varchar(200),
@NUMERO_DOMICILIO int,
@ID_LOCALIDAD int

AS
BEGIN
SET NOCOUNT ON;
INSERT INTO [dbo].[DOMICILIO]
([ID_LOCALIDAD]
,[CALLE_DOMICILIO]
,[NUMERO_DOMICILIO])

VALUES

(@ID_LOCALIDAD
,@CALLE_DOMICILIO
,@NUMERO_DOMICILIO)
Declare @idUltDomicilio As int = (Select MAX(ID_DOMICILIO) from DOMICILIO)
INSERT INTO [dbo].[USUARIO]
([ID_DOMICILIO]
,[NOMBRES_USUARIO]
,[APELLIDOS_USUARIO]
,[FNACIMIENTO_PERSONA]
,[DNI_USUARIO]
,[EMAIL_USUARIO]
,[CONTRASENA_USUARIO])
VALUES
(@idUltDomicilio

,@NOMBRE_USUARIO
,@APELLIDO_USUARIO
,@FNACIMIENTO_PERSONA
,@DNI_USUARIO
,@EMAIL_USUARIO
,@CONTRASEÑA_USUARIO)
END
